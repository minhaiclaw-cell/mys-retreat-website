<!-- Weather Widget for Kearney, Ontario -->
<div class="weather-widget" id="weatherWidget">
    <div class="weather-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
        </svg>
        <span>Kearney Weather</span>
    </div>
    <div class="weather-content" id="weatherContent">
        <div class="weather-loading">Loading...</div>
    </div>
</div>

<style>
.weather-widget {
    position: fixed;
    top: 120px;
    right: 20px;
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 20px 24px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    z-index: 900;
    min-width: 280px;
    border: 1px solid rgba(74, 93, 35, 0.15);
    transition: all 0.3s ease;
}

.weather-widget:hover {
    transform: translateY(-4px);
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
}

.weather-header {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    font-size: 0.875rem;
    color: var(--moss-dark, #2C3E1F);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 16px;
    padding-bottom: 12px;
    border-bottom: 2px solid rgba(74, 93, 35, 0.1);
}

.weather-header svg {
    color: var(--autumn-copper, #B87333);
}

.weather-content {
    font-size: 0.9375rem;
}

.weather-loading {
    text-align: center;
    color: var(--color-stone-600, #78716C);
    padding: 20px 0;
}

.weather-temp {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--moss-dark, #2C3E1F);
    margin: 8px 0;
    letter-spacing: -0.02em;
}

.weather-desc {
    font-size: 1rem;
    color: var(--color-stone-700, #44403C);
    margin-bottom: 16px;
    text-transform: capitalize;
}

.weather-details {
    display: grid;
    gap: 8px;
    font-size: 0.875rem;
    color: var(--color-stone-600, #78716C);
}

.weather-detail {
    display: flex;
    justify-content: space-between;
    padding: 8px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
}

.weather-detail:last-child {
    border-bottom: none;
}

.weather-detail strong {
    color: var(--color-stone-800, #292524);
}

.weather-icon {
    font-size: 3rem;
    text-align: center;
    margin: 12px 0;
}

@media (max-width: 768px) {
    .weather-widget {
        position: static;
        margin: 20px;
        width: calc(100% - 40px);
    }
}
</style>

<script>
// Weather Widget - OpenWeather API integration
async function loadWeather() {
    const weatherContent = document.getElementById('weatherContent');
    
    try {
        // Using Open-Meteo (free, no API key required)
        // Kearney, Ontario coordinates: 45.5833Â° N, 79.3167Â° W
        const response = await fetch('https://api.open-meteo.com/v1/forecast?latitude=45.5833&longitude=-79.3167&current=temperature_2m,relative_humidity_2m,weather_code,wind_speed_10m&temperature_unit=celsius&wind_speed_unit=kmh&timezone=America/Toronto');
        
        if (!response.ok) throw new Error('Weather data unavailable');
        
        const data = await response.json();
        const current = data.current;
        
        // Weather code mapping
        const weatherCodes = {
            0: { desc: 'Clear sky', icon: 'â˜€ï¸' },
            1: { desc: 'Mainly clear', icon: 'ğŸŒ¤ï¸' },
            2: { desc: 'Partly cloudy', icon: 'â›…' },
            3: { desc: 'Overcast', icon: 'â˜ï¸' },
            45: { desc: 'Foggy', icon: 'ğŸŒ«ï¸' },
            48: { desc: 'Foggy', icon: 'ğŸŒ«ï¸' },
            51: { desc: 'Light drizzle', icon: 'ğŸŒ¦ï¸' },
            53: { desc: 'Drizzle', icon: 'ğŸŒ¦ï¸' },
            55: { desc: 'Heavy drizzle', icon: 'ğŸŒ§ï¸' },
            61: { desc: 'Light rain', icon: 'ğŸŒ§ï¸' },
            63: { desc: 'Rain', icon: 'ğŸŒ§ï¸' },
            65: { desc: 'Heavy rain', icon: 'â›ˆï¸' },
            71: { desc: 'Light snow', icon: 'ğŸŒ¨ï¸' },
            73: { desc: 'Snow', icon: 'â„ï¸' },
            75: { desc: 'Heavy snow', icon: 'â„ï¸' },
            77: { desc: 'Snow grains', icon: 'â„ï¸' },
            80: { desc: 'Light showers', icon: 'ğŸŒ¦ï¸' },
            81: { desc: 'Showers', icon: 'ğŸŒ§ï¸' },
            82: { desc: 'Heavy showers', icon: 'â›ˆï¸' },
            85: { desc: 'Light snow showers', icon: 'ğŸŒ¨ï¸' },
            86: { desc: 'Snow showers', icon: 'â„ï¸' },
            95: { desc: 'Thunderstorm', icon: 'â›ˆï¸' },
            96: { desc: 'Thunderstorm with hail', icon: 'â›ˆï¸' },
            99: { desc: 'Thunderstorm with hail', icon: 'â›ˆï¸' }
        };
        
        const weather = weatherCodes[current.weather_code] || { desc: 'Unknown', icon: 'ğŸŒ¡ï¸' };
        
        weatherContent.innerHTML = `
            <div class="weather-icon">${weather.icon}</div>
            <div class="weather-temp">${Math.round(current.temperature_2m)}Â°C</div>
            <div class="weather-desc">${weather.desc}</div>
            <div class="weather-details">
                <div class="weather-detail">
                    <span>Humidity</span>
                    <strong>${current.relative_humidity_2m}%</strong>
                </div>
                <div class="weather-detail">
                    <span>Wind Speed</span>
                    <strong>${Math.round(current.wind_speed_10m)} km/h</strong>
                </div>
            </div>
        `;
    } catch (error) {
        weatherContent.innerHTML = `
            <div class="weather-error" style="text-align: center; color: #78716C; padding: 20px 0;">
                Weather data currently unavailable
            </div>
        `;
    }
}

// Load weather on page load
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadWeather);
} else {
    loadWeather();
}

// Refresh weather every 30 minutes
setInterval(loadWeather, 30 * 60 * 1000);
</script>
